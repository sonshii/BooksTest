(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{145:function(e,t,n){},217:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(24),i=n.n(o),r=(n(145),n(80)),s=n(72),l=n(44),u=n(111),j=n.n(u),b=n(127),O=n(224),d=n(226),f=n(227),x=n(221),h=n(42),m=n(228),p=n(229),v=n(15),g=function(e){var t=e.isVisible,n=e.onCancel,a=e.modal\u0421hoice,o=e.initialFormData,i=Object(c.useState)(),u=Object(l.a)(i,2),g=u[0],k=u[1],S=Object(c.useState)(0),B=Object(l.a)(S,2),C=B[0],w=B[1],I=O.a.useForm(),y=Object(l.a)(I,1)[0],E=Object(c.useState)(null),F=Object(l.a)(E,2),D=F[0],J=F[1],N=Object(c.useState)(),q=Object(l.a)(N,2),L=q[0],R=q[1],T=function(e){return new Promise((function(t,n){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){var e=new Image;e.src=c.result,e.onload=function(){145===e.naturalWidth&&205===e.naturalHeight?(t(c.result),J(!0)):(n("\u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"),J(!1))}},c.onerror=function(e){return n(e)}}))},U=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(0),e.next=4,T(t);case 4:n=e.sent,w(100),k(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsx)(d.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443",visible:t,onOk:function(){y.submit()},onCancel:n,children:Object(v.jsxs)(O.a,{name:"basic",onFinish:function(e){if(D||null===D){var t=g||o.photo,n=Object(s.a)(Object(s.a)(Object(s.a)({},o),e),{},{photo:t});a(n)}else console.log("error")},form:y,initialValues:o,children:[Object(v.jsx)(O.a.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",name:"title",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435."}],children:Object(v.jsx)(f.a,{})}),Object(v.jsx)(O.a.Item,{label:"\u0410\u0432\u0442\u043e\u0440",name:"author",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0430."}],children:Object(v.jsx)(f.a,{})}),Object(v.jsx)(O.a.Item,{label:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",children:Object(v.jsx)(x.a,{accept:"image/png, image/jpeg",beforeUpload:U,customRequest:function(){return{}},progress:{success:{percent:C}},onChange:function(e){var t=Object(r.a)(e.fileList);t=(t=t.slice(-1)).map((function(e){return e.response&&(e.url=e.response.url),e})),R(Object(r.a)(t))},fileList:L,children:Object(v.jsx)(h.a,{icon:Object(v.jsx)(p.a,{}),children:"Click to Upload"})})}),!1===D?Object(v.jsx)(m.a,{message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443 \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c 145x205px",type:"error",afterClose:function(){J(!0)}}):null]})})})},k=n(225),S=n(222),B=n(223),C=n(138),w=n(38),I=k.a.Title,y=k.a.Text,E=function(e){var t=e.book,n=e.deleteBook,c=e.onEditBook;return Object(v.jsx)("div",{children:Object(v.jsxs)(S.a,{cover:Object(v.jsx)(B.a,{alt:"image",src:t.photo}),actions:[Object(v.jsx)(C.a,{onClick:function(){c(t)}},"edit"),Object(v.jsx)(w.a,{onClick:function(){n(t.id)}})],children:[Object(v.jsx)(I,{children:t.title}),Object(v.jsx)(y,{children:t.author})]})})},F=n(73),D=n(40),J=function(e){var t=e.books,n=e.deleteBook,c=e.onEditBook;return t.length?Object(v.jsx)(F.a,{gutter:[16,16],children:t.map((function(e){return Object(v.jsx)(D.a,{xs:24,sm:12,md:8,lg:8,xl:6,children:Object(v.jsx)(E,{book:e,deleteBook:n,onEditBook:c})},e.id)}))}):Object(v.jsx)("div",{children:"\u041a\u043d\u0438\u0433 \u043d\u0435\u0442."})},N="BOOKS";n(217),n(218);var q=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(!1),i=Object(l.a)(o,2),u=i[0],j=i[1],b=Object(c.useState)(),O=Object(l.a)(b,2),d=O[0],f=O[1],x=function(e){localStorage.setItem(N,JSON.stringify(e))},m=function(e){a(e),x(e)};return Object(c.useEffect)((function(){var e=localStorage.getItem(N);e&&a(JSON.parse(e))}),[]),Object(v.jsxs)(F.a,{className:"App",children:[Object(v.jsx)(D.a,{span:12,offset:6,children:Object(v.jsx)(h.a,{type:"primary",onClick:function(){j(!0)},className:"button",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"})}),Object(v.jsx)(D.a,{span:20,offset:2,children:Object(v.jsx)(J,{books:n,deleteBook:function(e){var t=n.filter((function(t){return t.id!==e}));a(t),x(t)},onEditBook:function(e){f(e),j(!0)}})}),u&&Object(v.jsx)(g,{isVisible:u,onCancel:function(){j(!1),f()},"modal\u0421hoice":function(e){e.id?function(e){var t=n.map((function(t){return t.id===e.id?e:t}));m(t)}(e):function(e){var t=Object(s.a)({id:"".concat((new Date).getTime())},e),c=[].concat(Object(r.a)(n),[t]);m(c)}(e),f(),j(!1)},initialFormData:d})]})};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(q,{})}),document.getElementById("root"))}},[[219,1,2]]]);
//# sourceMappingURL=main.2a9a4df5.chunk.js.map